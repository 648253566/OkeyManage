#pragma checksum "D:\软件\OkeyManage\OkeyManage\Areas\sys\Views\Role\RoleRight.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "462f8d1952efe2f53e0415449468a45c781e6863"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Areas_sys_Views_Role_RoleRight), @"mvc.1.0.view", @"/Areas/sys/Views/Role/RoleRight.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"462f8d1952efe2f53e0415449468a45c781e6863", @"/Areas/sys/Views/Role/RoleRight.cshtml")]
    public class Areas_sys_Views_Role_RoleRight : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n");
#nullable restore
#line 2 "D:\软件\OkeyManage\OkeyManage\Areas\sys\Views\Role\RoleRight.cshtml"
  
    ViewData["Title"] = "RoleRightl";

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\软件\OkeyManage\OkeyManage\Areas\sys\Views\Role\RoleRight.cshtml"
Write(Html.Partial("_Top"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
    <div class=""layui-col-md6 layui-col-md-offset1"">

        <div class=""layui-form"">
            <div class=""layui-form-item layui-layout-admin"">

                <div class=""layui-form-block"" style=""position:fixed;"">

                    <button type=""button"" class=""layui-btn layui-btn-primary"" onclick=""checkAll('#RoleRightTree')"">
                        全选
                    </button>
                    <button type=""button"" class=""layui-btn layui-btn-primary"" onclick=""uncheckAll('#RoleRightTree')"">
                        全不选
                    </button>
                    <button type=""button"" class=""layui-btn layui-btn-primary"" onclick=""showAll('#RoleRightTree')"">
                        全部展开
                    </button>
                    <button type=""button"" class=""layui-btn layui-btn-primary"" onclick=""closeAll('#RoleRightTree')"">
                        全部隐藏
                    </button>

                </div>
            </div>
        </div>
");
#nullable restore
#line 29 "D:\软件\OkeyManage\OkeyManage\Areas\sys\Views\Role\RoleRight.cshtml"
         using (Html.BeginForm("RoleRight", "Role", FormMethod.Post, new { @class = "layui-form layuimini-form", @id = "RoleForm",@style= "padding-top:4em" }))
        {

#line default
#line hidden
#nullable disable
            WriteLiteral(@"                <div class=""layui-form-item"">
                    <label class=""layui-form-label"">多选权限</label>
                    <div class=""layui-input-block"">
                        <div id=""RoleRightTree""></div>
                    </div>
                </div>
                <input type=""hidden"" id=""roleId""");
            BeginWriteAttribute("value", " value=\"", 1565, "\"", 1588, 1);
#nullable restore
#line 37 "D:\软件\OkeyManage\OkeyManage\Areas\sys\Views\Role\RoleRight.cshtml"
WriteAttributeValue("", 1573, ViewBag.RoleId, 1573, 15, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(@"/>
                <div class=""layui-form-item layui-layout-admin"">
                    <div class=""layui-input-block"">
                        <div class=""layui-footer"" style=""left: 0;"">
                            <div style=""margin-left:40%"">
                                <button class=""layui-btn"" lay-submit lay-filter=""saveBtn"">立即提交</button>
                                <button type=""button"" class=""layui-btn layui-btn-primary"" onclick=""BtnClose()"">关闭</button>
                            </div>
                        </div>
                    </div>
                </div>
");
#nullable restore
#line 48 "D:\软件\OkeyManage\OkeyManage\Areas\sys\Views\Role\RoleRight.cshtml"
        }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"        </div>
<script>
    layui.config({
        base: ""/lib/layui-v2.5.5/lay/modules/"",


    }).extend({
        authtree: ""authtree/authtree""
    });
    // 全选样例
    function checkAll(dst) {
        layui.use(['jquery', 'layer', 'authtree'], function () {
            var layer = layui.layer;
            var authtree = layui.authtree;

            authtree.checkAll(dst);
        });
    }
    // 全不选样例
    function uncheckAll(dst) {
        layui.use(['jquery', 'layer', 'authtree'], function () {
            var layer = layui.layer;
            var authtree = layui.authtree;

            authtree.uncheckAll(dst);
        });
    }
    // 显示全部
    function showAll(dst) {
        layui.use(['jquery', 'layer', 'authtree'], function () {
            var layer = layui.layer;
            var authtree = layui.authtree;

            authtree.showAll(dst);
          
        });
    }
    // 隐藏全部
    function closeAll(dst) {
        layui.use(['jquery', 'layer', 'authtree'], f");
            WriteLiteral(@"unction () {
            var layer = layui.layer;
            var authtree = layui.authtree;

            authtree.closeAll(dst);
        });
    }
    layui.use(['layer', 'laytpl', 'authtree', 'jquery', 'form', 'code'], function () {
        var $ = layui.jquery;
        var layer = layui.layer;
        var authtree = layui.authtree;
        var form = layui.form;
        var laytpl = layui.laytpl;


        $.ajax({
            url: '/sys/Role/GetRoleRightTreeList',
            dataType: 'json',
            type: ""Post"",
            data: { roleId: $(""#roleId"").val()},
            success: function (res) {
                // 支持自定义递归字段、数组权限判断等
                // 深坑注意：如果API返回的数据是字符串，那么 startPid 的数据类型也需要是字符串
                var trees = authtree.listConvert(res.data.list, {
                    primaryKey: 'value'
                    , startPid: ""0""
                    , parentKey: 'parentId'
                    , nameKey: 'name'
                    , valueKey: 'value'
              ");
            WriteLiteral(@"      , checkedKey: res.data.checkedKey
                    , disabledKey: res.data.disabledKey
                });
                layui.code({

                });
                // 如果页面中多个树共存，需要注意 layfilter 需要不一样
                authtree.render('#RoleRightTree', trees, {
                    //权限树的id
                    inputname: 'authids[]',
                    //监听权限树改变，获取节点信息使用
                    layfilter: 'lay-check-convert-auth',
                    theme: 'auth-skin-default',
                    //监听权限树时使用
                    openall: true,//展开所有节点
                    autowidth: true,
                });




            },
            error: function (xml, errstr, err) {
                layer.alert(errstr + '，获取样例数据失败，请检查是否部署在本地服务器中！');
            }
        });
    });

    layui.use(['form', 'authtree'], function () {
        var form = layui.form,
            layer = layui.layer,
            authtree = layui.authtree,
            $ = layui.$;

        //监听提交
 ");
            WriteLiteral(@"       form.on('submit(saveBtn)', function (data) {
            // var index = layer.alert(JSON.stringify(data.field), {
            // title: '最终的提交信息'

            layer.load(0);
            // 获取所有已选中节点
            var checked = authtree.getLeaf(""#RoleRightTree"");
            
            $.post($(form).attr('action'), { RoleRightArr: checked, roleId: $(""#roleId"").val() }, function (result) {
                if (result.msg == ""执行成功"") {
                    layer.open({
                        content: '' + result.msg + '',
                        btn: ['确认'],
                        yes: function (index, layero) {
                            // 关闭弹出层
                            layer.close(index);

                            var iframeIndex = parent.layer.getFrameIndex(window.name);
                            parent.layer.close(iframeIndex);
                            layer.closeAll('loading');
                        },

                        cancel: function (index, layero) {
 ");
            WriteLiteral(@"                           layer.close(index);

                            var iframeIndex = parent.layer.getFrameIndex(window.name);
                            parent.layer.close(iframeIndex);
                            layer.closeAll('loading');
                        }
                    })
                }
                else {
                    layer.open({
                        content: '' + result.msg + '',
                        btn: ['确认'],
                        yes: function (index, layero) {
                            layer.closeAll()
                        },
                        cancel: function (index, layero) {
                            layer.closeAll()
                        }
                    })
                }
            });
            return false;
        })
    });

</script>

");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
